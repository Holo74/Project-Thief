[gd_scene load_steps=25 format=3 uid="uid://dd2jrr4f30juc"]

[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Flow/Selector.cs" id="1"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Flow/Sequencer.cs" id="2"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Conditions/FloatValueAboveThreshold.cs" id="3"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Conditions/ReturnBoolValue.cs" id="4"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Conditions/CurrentTargetIsInRange.cs" id="5"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Conditions/TimerReader.cs" id="7"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Actions/SetAnimCondition.cs" id="8"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Flow/ReturnsXAlways.cs" id="10"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Actions/SetBoolBlackboard.cs" id="10_pdjre"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Conditions/ContainsValue.cs" id="11"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Actions/SetPositionFromBB.cs" id="12"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Actions/PlaySound.cs" id="12_8g16j"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Actions/MoveToPosition.cs" id="13"]
[ext_resource type="AudioStream" uid="uid://p450rvegtg7h" path="res://Sounds/NPC/Human/Generic/Female/Curious Sounds/Callout-01.wav" id="13_xs5y6"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Actions/SetTargetToPlayer.cs" id="14"]
[ext_resource type="AudioStream" uid="uid://5dmhi251x8cu" path="res://Sounds/NPC/Human/Generic/Female/Curious Sounds/Callout-02.wav" id="14_8tbps"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Flow/Flipper.cs" id="15"]
[ext_resource type="AudioStream" uid="uid://ddm5wy6vpbanj" path="res://Sounds/NPC/Human/Generic/Female/Curious Sounds/Callout-03.wav" id="15_ck3kv"]
[ext_resource type="AudioStream" uid="uid://sgt8xoaj2xag" path="res://Sounds/NPC/Human/Generic/Female/Curious Sounds/Callout-04.wav" id="16_hndoy"]
[ext_resource type="Script" path="res://Scripts/BehaviorTree/Nodes/Leaf/Actions/SetHomeToStart.cs" id="19_fqysi"]
[ext_resource type="AudioStream" uid="uid://dnnqgsjn7k8oq" path="res://Sounds/NPC/Human/Generic/Female/Passive Sounds/Callout-02.wav" id="22_uxcw1"]
[ext_resource type="AudioStream" uid="uid://b4jk3ekneyloo" path="res://Sounds/NPC/Human/Generic/Female/Passive Sounds/Callout-04.wav" id="23_k5p8f"]

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_5p7yl"]
streams_count = 4
random_pitch = 1.0
random_volume_offset_db = 0.66
stream_0/stream = ExtResource("13_xs5y6")
stream_0/weight = 1.0
stream_1/stream = ExtResource("14_8tbps")
stream_1/weight = 1.0
stream_2/stream = ExtResource("15_ck3kv")
stream_2/weight = 1.0
stream_3/stream = ExtResource("16_hndoy")
stream_3/weight = 1.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_2r45s"]
streams_count = 2
stream_0/stream = ExtResource("22_uxcw1")
stream_0/weight = 1.0
stream_1/stream = ExtResource("23_k5p8f")
stream_1/weight = 1.0

[node name="Selector" type="Node"]
script = ExtResource("1")

[node name="Hostile\nSequencere" type="Node" parent="."]
script = ExtResource("2")

[node name="Sensing meter > x" type="Node" parent="Hostile\nSequencere"]
script = ExtResource("3")
Threshold = 75.0

[node name="Can see player" type="Node" parent="Hostile\nSequencere"]
script = ExtResource("4")
Key = 1
ExpectedVal = true

[node name="Sequence" type="Node" parent="Hostile\nSequencere"]
script = ExtResource("2")

[node name="Set target to player" type="Node" parent="Hostile\nSequencere/Sequence"]
script = ExtResource("14")

[node name="Selector" type="Node" parent="Hostile\nSequencere/Sequence"]
script = ExtResource("1")

[node name="Hit player\nSequencer" type="Node" parent="Hostile\nSequencere/Sequence/Selector"]
script = ExtResource("2")

[node name="Player in distance" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Hit player\nSequencer"]
script = ExtResource("5")
Range = 2.0

[node name="Is in attack" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Hit player\nSequencer"]
script = ExtResource("4")
Key = 3

[node name="Always True" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Hit player\nSequencer"]
script = ExtResource("10")
ReturnThis = 1

[node name="Hitting player\nSequencer" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Hit player\nSequencer/Always True"]
script = ExtResource("2")

[node name="Timer runs out" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Hit player\nSequencer/Always True/Hitting player\nSequencer"]
script = ExtResource("7")
Timer = 5.0
WaitInitial = true

[node name="Play attack animation" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Hit player\nSequencer/Always True/Hitting player\nSequencer"]
script = ExtResource("8")
AnimPath = "parameters/conditions/IsAttacking"
SetConditionTo = true

[node name="Is Attacking now" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Hit player\nSequencer/Always True/Hitting player\nSequencer"]
script = ExtResource("10_pdjre")
KeyToChange = 3
ValueToSet = true

[node name="Move to player\nSequencer" type="Node" parent="Hostile\nSequencere/Sequence/Selector"]
script = ExtResource("2")

[node name="Move" type="Node" parent="Hostile\nSequencere/Sequence/Selector/Move to player\nSequencer"]
script = ExtResource("13")
Speed = 3.0

[node name="Investigate\nSequencer" type="Node" parent="."]
script = ExtResource("2")

[node name="Sensing meter > x" type="Node" parent="Investigate\nSequencer"]
script = ExtResource("3")
Threshold = 25.0

[node name="Sequencer" type="Node" parent="Investigate\nSequencer"]
script = ExtResource("2")

[node name="Return true" type="Node" parent="Investigate\nSequencer/Sequencer"]
script = ExtResource("10")
ReturnThis = 1

[node name="Make sound tree\nSequencer" type="Node" parent="Investigate\nSequencer/Sequencer/Return true"]
script = ExtResource("2")

[node name="Wait 10 sec after succeed" type="Node" parent="Investigate\nSequencer/Sequencer/Return true/Make sound tree\nSequencer"]
script = ExtResource("7")
Timer = 10.0

[node name="Play alert sound" type="Node" parent="Investigate\nSequencer/Sequencer/Return true/Make sound tree\nSequencer"]
script = ExtResource("12_8g16j")
MouthSound = true
Audio = SubResource("AudioStreamRandomizer_5p7yl")

[node name="Walk to point\nSequencer" type="Node" parent="Investigate\nSequencer/Sequencer"]
script = ExtResource("2")

[node name="Sensing meter > x" type="Node" parent="Investigate\nSequencer/Sequencer/Walk to point\nSequencer"]
script = ExtResource("3")
Threshold = 50.0

[node name="Found disturbances" type="Node" parent="Investigate\nSequencer/Sequencer/Walk to point\nSequencer"]
script = ExtResource("11")

[node name="Set move to position" type="Node" parent="Investigate\nSequencer/Sequencer/Walk to point\nSequencer"]
script = ExtResource("12")
Memory = 5

[node name="Move to position" type="Node" parent="Investigate\nSequencer/Sequencer/Walk to point\nSequencer"]
script = ExtResource("13")
Speed = 1.0

[node name="Idle\n Selector" type="Node" parent="."]
script = ExtResource("1")

[node name="Sequence2" type="Node" parent="Idle\n Selector"]
script = ExtResource("2")

[node name="Return success" type="Node" parent="Idle\n Selector/Sequence2"]
script = ExtResource("10")
ReturnThis = 1

[node name="Get Position" type="Node" parent="Idle\n Selector/Sequence2/Return success"]
script = ExtResource("19_fqysi")

[node name="Sequence" type="Node" parent="Idle\n Selector/Sequence2"]
script = ExtResource("2")

[node name="Flipper" type="Node" parent="Idle\n Selector/Sequence2/Sequence"]
script = ExtResource("15")

[node name="Is in position" type="Node" parent="Idle\n Selector/Sequence2/Sequence/Flipper"]
script = ExtResource("5")
Range = 2.0

[node name="Move to position" type="Node" parent="Idle\n Selector/Sequence2/Sequence"]
script = ExtResource("13")
Speed = 2.0

[node name="Sequencer" type="Node" parent="Idle\n Selector"]
script = ExtResource("2")

[node name="Wait 10 seconds" type="Node" parent="Idle\n Selector/Sequencer"]
script = ExtResource("7")
Timer = 10.0
WaitInitial = true

[node name="Produce random idle noise" type="Node" parent="Idle\n Selector/Sequencer"]
script = ExtResource("12_8g16j")
MouthSound = true
Audio = SubResource("AudioStreamRandomizer_2r45s")

[node name="Play random idle animation" type="Node" parent="Idle\n Selector/Sequencer"]
